<header class="main-header" [class.sticky]="isSticky" [class.home-header]="isHome">
  <nav class="navbar navbar-expand-lg container-fluid">
    <div class="container align-items-center">
      <a class="navbar-brand" (click)="handleRouterChange()" routerLink="/">
        <img src="assets/images/logo.svg" alt="KMS Logo" class="logo no-lazy-load" />
      </a>

      <!-- Toggle for mobile - Hidden on mobile -->
      <!-- <button
        class="navbar-toggler d-lg-block d-none"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#mainNav"
      >
        <span class="navbar-toggler-icon"></span>
      </button> -->

      <!-- Nav Menu - Hidden on mobile -->
      <div class="collapse navbar-collapse d-lg-block d-none" id="mainNav">
        <ul class="navbar-nav ms-auto mb-2 mb-lg-0 align-items-lg-center">
          <li class="nav-item">
            <a
              routerLinkActive="active"
              (click)="handleRouterChange()"
              [routerLinkActiveOptions]="{ exact: true }"
              routerLink="/home"
              class="nav-link"
              >HOME</a
            >
          </li>
          <li class="nav-item">
            <a
              routerLinkActive="active"
              (click)="handleRouterChange()"
              routerLink="/about"
              class="nav-link"
              >ABOUT US</a
            >
          </li>
          <li class="nav-item">
            <a
              routerLinkActive="active"
              (click)="handleRouterChange()"
              routerLink="/kms-approach"
              class="nav-link"
              >KMS APPROACH</a
            >
          </li>
          <!-- <li class="nav-item dropdown">
            <a
              routerLinkActive="active"
              (click)="handleRouterChange()"
              routerLink="/kms-expertise/business-advisory"
              class="nav-link d-flex"
              >KMS EXPERTISE <mat-icon>keyboard_arrow_down</mat-icon></a
            >
          </li> -->
          <li
            class="nav-item dropdown"
            (mouseenter)="isDropdownOpen = true"
            (mouseleave)="isDropdownOpen = false"
          >
            <a
              routerLinkActive="active"
              class="nav-link d-flex align-items-center dropdown-toggle"
              [class.show]="isDropdownOpen"
            >
              KMS EXPERTISE
              <mat-icon>keyboard_arrow_down</mat-icon>
            </a>

            <!-- Dropdown Menu -->
            <ul class="dropdown-menu" [class.show]="isDropdownOpen">
              @for (item of expertiseList; track item.routerLink) {
              <li>
                <a class="dropdown-item" (click)="handleRouterChange()" [routerLink]="item.routerLink">
                  <mat-icon class="arrow-icon">arrow_forward</mat-icon>
                  <span>{{ item.label }}</span>
                </a>
              </li>
              }
            </ul>
          </li>

          <li class="nav-item"><a routerLinkActive="active" (click)="handleRouterChange()" routerLink="/industries" class="nav-link">INDUSTRIES</a></li>

          <!-- Call Button -->
          <li class="nav-item ms-lg-3">
            <a href="tel:+91926309540" class="call-btn btn d-flex align-items-center">
              <mat-icon svgIcon="telephone" class="me-2"></mat-icon> +91 79 26309540
            </a>
          </li>
        </ul>
      </div>
        <a href="tel:+91926309540" class="d-lg-none call-btn btn d-flex align-items-center">
          <mat-icon svgIcon="telephone" class="me-2"></mat-icon> +91 79 26309540
        </a>
    </div>
  </nav>
</header>

<!-- Mobile Bottom Navigation -->
<nav class="mobile-bottom-nav d-lg-none">
  <ul class="mobile-nav-list">
    <li class="mobile-nav-item">
      <a
        routerLinkActive="active"
        (click)="handleRouterChange()"
        [routerLinkActiveOptions]="{ exact: true }"
        routerLink="/home"
        class="mobile-nav-link"
        title="Home"
      >
        <mat-icon>home</mat-icon>
      </a>
    </li>
    <li class="mobile-nav-item">
      <a
        routerLinkActive="active"
        (click)="handleRouterChange()"
        routerLink="/about"
        class="mobile-nav-link"
        title="About Us"
      >
        <mat-icon>info</mat-icon>
      </a>
    </li>
    <li class="mobile-nav-item">
      <a
        routerLinkActive="active"
        (click)="handleRouterChange()"
        routerLink="/kms-approach"
        class="mobile-nav-link"
        title="KMS Approach"
      >
        <mat-icon>trending_up</mat-icon>
      </a>
    </li>
    <li class="mobile-nav-item">
      <a
        routerLinkActive="active"
        (click)="toggleMobileDropdown()"
        class="mobile-nav-link"
        [class.active]="isMobileDropdownOpen"
        title="KMS Expertise"
      >
        <mat-icon>business_center</mat-icon>
      </a>
      <!-- Mobile Dropdown -->
      <div class="mobile-dropdown" [class.show]="isMobileDropdownOpen">
        <ul class="mobile-dropdown-list">
          @for (item of expertiseList; track item.routerLink) {
          <li>
            <a class="mobile-dropdown-item" (click)="handleMobileExpertiseClick(item.routerLink)" [routerLink]="item.routerLink">
              <span>{{ item.label }}</span>
            </a>
          </li>
          }
        </ul>
      </div>
    </li>
    <li class="mobile-nav-item">
      <a
        routerLinkActive="active"
        (click)="handleRouterChange()"
        routerLink="/industries"
        class="mobile-nav-link"
        title="Industries"
      >
        <mat-icon>business</mat-icon>
      </a>
    </li>
    <!-- <li class="mobile-nav-item">
      <a
        href="tel:+91926309540"
        class="mobile-nav-link call-link"
        title="Call Us"
      >
        <mat-icon>phone</mat-icon>
      </a>
    </li> -->
  </ul>
</nav>

<main>
  <router-outlet />
</main>

<app-footer></app-footer>
<!-- footer.component.html -->

<!-- Scroll to Top Button -->
<button 
  class="scroll-to-top-btn" 
  [class.visible]="showScrollToTop"
  (click)="scrollToTop()"
  aria-label="Scroll to top"
  title="Scroll to top">
  <svg class="progress-ring" width="60" height="60">
    <circle
      class="progress-ring-circle-bg"
      stroke="currentColor"
      stroke-width="3"
      fill="transparent"
      r="26"
      cx="30"
      cy="30"/>
    <circle
      class="progress-ring-circle"
      stroke="currentColor"
      stroke-width="3"
      fill="transparent"
      r="26"
      cx="30"
      cy="30"
      [attr.stroke-dasharray]="circleCircumference"
      [style.stroke-dashoffset]="scrollProgressOffset"/>
  </svg>
  <mat-icon class="scroll-icon">keyboard_arrow_up</mat-icon>
</button>
